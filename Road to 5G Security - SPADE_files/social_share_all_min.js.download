!function(a){a(document).ready(function(){}),a.fn.updateSocialShareBar=function(b){("undefined"==typeof b||null===b)&&(b={checkVisible:!0});var c=(this.length,[]),d=[],e=[],f=[];a.each(this,function(g,h){var i=a(h).data("url_shared");a(h).isOnScreen(b.checkVisible)?-1==e.indexOf(i)?(e.push(i),c.push(h)):(f.push(i),d.push(h)):-1==f.indexOf(i)&&(f.push(i),d.push(h))}),a.each(c,function(b,c){var e=a(c).data("url_shared"),f=a(c).data("unique_key"),g=[];a.each(d,function(b,c){a(c).data("url_shared")==e&&g.push(c)});var h=a(c).data("social_share_element"),i=a(c).data("share_counter_updated_all"),j=a(c).data("share_counter_in_progress_all");i||j||(a(c).attr("data-share_counter_in_progress_all",!0),a.each(g,function(b,c){a(c).attr("data-share_counter_in_progress_all",!0)}),a.ajax({type:"get",dataType:"json",url:base_url+"/ajax_files/etb2b_social_api_all.php?action=get_url_shareCount",data:{page_url:e,cacheKeyParam:f},success:function(b){a.each(a(c).children(h),function(c,d){var e=a(d).data("social_key"),f=a(d).data("share_counter");a(d).find(f).html(b[e])}),a.each(g,function(c,d){a.each(a(d).children(h),function(c,d){var e=a(d).data("social_key"),f=a(d).data("share_counter");a(d).find(f).html(b[e])})}),a(c).attr("data-share_counter_updated_all",!0)},error:function(){a(c).attr("data-share_counter_updated_all",!1),a(c).attr("data-share_counter_in_progress_all",!1)}}))})},a.fn.isOnScreen=function(b){var c={};c.top=a(window).scrollTop(),c.bottom=c.top+a(window).height();var d={};d.top=this.offset().top,d.bottom=d.top+this.outerHeight();var e=b?!(this.is(":hidden")||this.parents(":hidden").length):!0;return d.top<=c.bottom&&d.bottom>=c.top&&d.bottom<=c.bottom&&d.top>=c.top&&e}}(jQuery);